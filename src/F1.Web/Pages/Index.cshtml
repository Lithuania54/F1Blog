@page
@model F1.Web.Pages.IndexModel
@{
    Layout = "~/Pages/Shared/_Layout.cshtml";
    var images = Model.CarouselImageUrls ?? new List<string>();
}

<!-- Navbar is rendered by the layout (Pages/Shared/_Layout.cshtml) which includes the shared _Nav partial. -->
<!-- Order: Navbar (from layout) -> Centered heading -> Full-viewport carousel -->

<section class="hero-tagline text-center py-4">
  <div class="container">
    <h1 class="display-5 mb-0">Everything about F1</h1>
  </div>
</section>

@if (images.Any())
{
  <section class="carousel-area">
    <div class="swiper mySwiper" aria-label="F1 cars carousel">
      <div class="swiper-wrapper">
        @for (int i = 0; i < images.Count; i++)
        {
            <div class="swiper-slide">
              <img src="@images[i]" alt="F1 car #@(i + 1)" loading="lazy" class="carousel-img" />
            </div>
        }
      </div>

      <div class="swiper-pagination" role="navigation" aria-label="Carousel pagination"></div>
      <button class="swiper-button-prev" aria-label="Previous slide"></button>
      <button class="swiper-button-next" aria-label="Next slide"></button>
    </div>

    <noscript>
      <div class="noscript-hero text-center">
        <img src="@images.First()" alt="F1 hero image" loading="lazy" class="carousel-img" />
      </div>
    </noscript>
  </section>
}
else
{
  <section class="no-images-placeholder text-center py-5">
    <div class="container">
      <p class="lead text-muted mb-0">
        @Model.CarouselNotFoundMessage
      </p>
    </div>
  </section>
}

@section Styles {
  <style>
    /* proportional layout: tagline height + carousel fill remaining viewport */
    .hero-tagline { background: rgba(0,0,0,0.55); color: #fff; }
    .carousel-area { height: calc(100vh - 110px); display:flex; align-items:center; justify-content:center; background:#000; }
    .swiper, .swiper-slide { width:100%; height:100%; }
    .carousel-img { width:100%; height:100%; object-fit:cover; display:block; }
    .noscript-hero img { width:100%; height:80vh; object-fit:cover; }
    @media (max-width:576px) {
      .carousel-area { height: calc(100vh - 140px); }
      .hero-tagline .display-5 { font-size:1.5rem; }
    }
  </style>
}

@section Scripts {
  @* Carousel initialization is expected in wwwroot/js/carousel-init.js (loaded from layout). If you need a quick inline fallback, uncomment below. *@
  @* <script>document.addEventListener('DOMContentLoaded',()=>{ if(typeof Swiper!=='undefined'){ new Swiper('.mySwiper',{loop:true,autoplay:{delay:4000,disableOnInteraction:false,pauseOnMouseEnter:true},pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev'},keyboard:{enabled:true}});}});</script> *@
}
