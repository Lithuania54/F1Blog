@using Microsoft.AspNetCore.Mvc.Routing
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

<nav class="w-full bg-black/60 fixed top-0 z-40">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <a class="text-white font-bold text-lg tracking-wide" asp-page="/Index">DriveTheStory</a>
      <button id="darkToggle" aria-label="Toggle dark mode" class="text-gray-300 hidden md:inline">ðŸŒ™</button>
    </div>

    <div class="hidden md:flex gap-6 items-center" role="navigation" aria-label="Main Navigation">
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Blogs">Blogs</a>
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Rankings">Rankings</a>
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Races">Races</a>
    </div>

    <div class="md:hidden">
      <button id="mobileMenuButton" aria-controls="mobileMenu" aria-expanded="false" aria-label="Open menu" class="text-white">â˜°</button>
    </div>
  </div>

  <div id="mobileMenu" class="hidden bg-black/80 md:hidden">
    <div class="px-4 py-4 flex flex-col gap-3">
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Blogs">Blogs</a>
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Rankings">Rankings</a>
      <a class="nav-link text-gray-300 hover:text-white" asp-page="/Races">Races</a>
    </div>
  </div>

  <script>
    // Basic active-link highlighting (server-side fallback uses asp-page)
    (function(){
      const path = location.pathname.toLowerCase();
      document.querySelectorAll('.nav-link').forEach(a=>{
        try{ if(a.getAttribute('href') && path===a.getAttribute('href').toLowerCase()) a.classList.add('text-white','font-semibold'); }catch(e){}
      });
    })();
  </script>
</nav>

